parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"RYAF":[function(require,module,exports) {
"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=function(){function n(){t(this,n),this.running=!1,this.latestPlay=null,this.executionMillis=0}return e(n,[{key:"start",value:function(){this.running=!0,this.latestPlay=performance.now()}},{key:"pause",value:function(){this.running=!1,this.executionMillis+=performance.now()-this.latestPlay,this.latestPlay=null}},{key:"reset",value:function(){this.running=!1,this.latestPlay=null,this.executionMillis=0}},{key:"setState",value:function(t){this.running=t,this.running?this.start():this.pause()}},{key:"update",value:function(){if(this.running){var t=performance.now(),n=null===this.latestPlay?0:t-this.latestPlay;this.executionMillis+=n,this.latestPlay=t}return this.executionMillis}},{key:"isRunning",value:function(){return this.running}},{key:"now",get:function(){return this.executionMillis}}]),n}(),s=new i;exports.default=s;
},{}],"q7W2":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=i();return function(){var n,r=c(e);if(t){var u=c(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return o(this,n)}}function o(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?u(t):n}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=1,y=2,g=4,p=8,h=16,d=32,v=[new Map([[s,"Lv1"],[y,6e3],[g,.36],[p,40],[h,100],[d,4200]]),new Map([[s,"Lv2"],[y,15e3],[g,.48],[p,55],[h,175],[d,3600]]),new Map([[s,"Lv3"],[y,37500],[g,.6],[p,70],[h,250],[d,3e3]]),new Map([[s,"Lv4"],[y,1/0],[g,.72],[p,85],[h,325],[d,2400]])],b=function(){function e(){a(this,e)}return l(e,[{key:"daggerDistanceRatio",get:function(){return.7}},{key:"modelUpdatePeriod",get:function(){return 12}},{key:"hookProjectileSpeed",get:function(){return 1600}},{key:"daggerPenaltyRatio",get:function(){return.8}},{key:"daggerBackswing",get:function(){return 120}},{key:"daggerCooldown",get:function(){return 2400}},{key:"pudgeMovementSpeed",get:function(){return 300}},{key:"pudgeCollisionSize",get:function(){return 24}},{key:"meatCollisionSize",get:function(){return 28}},{key:"meatAmount",get:function(){return 10}}]),e}(),k=function(e){t(o,b);var n=r(o);function o(){var e;return a(this,o),(e=n.call(this)).currentLevel=0,e.currentScore=0,e.x=800,e.y=600,e.diagonal=1e3,e}return l(o,[{key:"setBoundary",value:function(e,t){this.x=e,this.y=t,this.diagonal=Math.hypot(e,t)}},{key:"reset",value:function(){this.currentLevel=0,this.currentScore=0}},{key:"gainScore",value:function(e,t,n){var r=1.6*e+t*(.8+.2*n),o=Math.cbrt(this.x*this.y),u=50*this.currentLevel,i=Math.floor(r+o+u);console.log(~~e,~~t,n,i);var c=this.currentScore+=i;return this.currentLevel=v.findIndex(function(e){return e.get(y)>=c}),i}},{key:"updateAndGetRecord",value:function(){var e,t=Number.parseInt(null!==(e=window.localStorage.getItem("score.v2"))&&void 0!==e?e:"0",10),n=Math.round(this.currentScore);return t<n&&(t=n,window.localStorage.setItem("score.v2",n.toString())),[t,n]}},{key:"current",get:function(){return v[this.currentLevel]}},{key:"displayLevelText",get:function(){return this.current.get(s)}},{key:"meatSpeedMin",get:function(){return this.current.get(p)}},{key:"meatSpeedRange",get:function(){return this.current.get(h)}},{key:"meatTrendPeriod",get:function(){return this.current.get(d)}},{key:"daggerMaxDistance",get:function(){return this.diagonal*this.daggerDistanceRatio}},{key:"hookCastRange",get:function(){return this.diagonal*this.current.get(g)}},{key:"expValue",get:function(){if(this.currentLevel===v.length-1)return 1;var e=0===this.currentLevel?0:v[this.currentLevel-1].get(y),t=this.current.get(y);return(this.currentScore-e)/t}}]),o}(),m=new k;exports.default=m;
},{}],"zFBB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Castable=exports.Movable=void 0;var t=n(require("./Stopwatch")),e=n(require("./Config"));function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return l(t)||s(t,e)||u(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=t[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(s){o=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}function l(t){if(Array.isArray(t))return t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=v();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&k(t.prototype,e),n&&k(t,n),t}var m=function(){function t(){b(this,t),this.x=0,this.y=0}return g(t,[{key:"updateModel",value:function(t){throw void 0}},{key:"updateView",value:function(){throw void 0}},{key:"getVectorPoint",value:function(t,e,n){return t+(e-t)*n}}]),t}(),w=function(t){a(r,m);var n=h(r);function r(t){var e;return b(this,r),(e=n.call(this)).collisionSize=t,e.forceMoveSource=null,e}return g(r,[{key:"withinRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.collisionSize;return Math.hypot(this.x-t,this.y-e)<=n}},{key:"clipPos",value:function(t){if(this[t]<this.collisionSize)return this[t]=this.collisionSize,!0;var n=e.default[t]-this.collisionSize;return this[t]>n&&(this[t]=n,!0)}},{key:"randomizePosition",value:function(){this.x=Math.random()*e.default.x,this.y=Math.random()*e.default.y}},{key:"normalMove",value:function(t){throw void 0}},{key:"unlinkedPostback",value:function(){}},{key:"updateModel",value:function(t){this.forceMoveSource?(this.x=this.destX=this.forceMoveSource.x,this.y=this.destY=this.forceMoveSource.y):this.normalMove(t)}},{key:"updateView",value:function(){this.aniElem.setAttribute("cx",this.x.toFixed(0)),this.aniElem.setAttribute("cy",this.y.toFixed(0))}}]),r}();exports.Movable=w;var S=function(e){a(r,m);var n=h(r);function r(t){var e;return b(this,r),(e=n.call(this)).localCast=t,e.pending=!1,e.srcX=0,e.srcY=0,e.destX=0,e.destY=0,e.linkedObject=null,e.backswingEnd=0,e.skillEnd=0,e}return g(r,[{key:"isReady",value:function(){return t.default.now>=this.skillEnd}},{key:"isCasting",value:function(){return t.default.now<this.backswingEnd}},{key:"getSrcDestPos",value:function(t,e,n){throw void 0}},{key:"register",value:function(t,e,n){var r=o(this.getSrcDestPos(t,e,n),4);this.srcX=r[0],this.srcY=r[1],this.destX=r[2],this.destY=r[3],t.registerMove(this.srcX,this.srcY),this.pending=!0}},{key:"unregister",value:function(){this.pending=!1}},{key:"cast",value:function(t){throw void 0}},{key:"tryCast",value:function(t){return!(!this.pending||!t.withinRange(this.srcX,this.srcY,1))&&(this.pending=!1,this.cast(t),!0)}},{key:"linkObject",value:function(t){this.unlinkObject(),this.linkedObject=t,t.forceMoveSource=this}},{key:"unlinkObject",value:function(){null!==this.linkedObject&&(this.linkedObject.forceMoveSource=null,this.linkedObject.unlinkedPostback(),this.linkedObject=null)}},{key:"getAnalyzeTextArray",value:function(){throw void 0}}]),r}();exports.Castable=S;
},{"./Stopwatch":"RYAF","./Config":"q7W2"}],"YTsE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./AbstractObject"),e=r(require("./Stopwatch")),n=r(require("./Config"));function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=d();return function(){var n,r=y(t);if(e){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=1.5*Math.PI,g=function(r){u(a,t.Castable);var i=l(a);function a(t){var e;return o(this,a),(e=i.call(this,!0)).context2d=t.getContext("2d"),e.context2d.fillStyle="rgba(0, 0, 0, 0.6)",e.canvasMidX=.5*t.width,e.canvasMidY=.5*t.height,e.canvasSpan=Math.max(t.width,t.height),t.style.backgroundSize="".concat(t.width,"px ").concat(t.height,"px"),e.blinkFinished=!0,e.resultArray=[],e}return c(a,[{key:"getSrcDestPos",value:function(t,e,r){var i=e-t.x,o=r-t.y,a=Math.hypot(i,o),c=n.default.daggerMaxDistance,u=a<=c?a:c*n.default.daggerPenaltyRatio;console.log("Attempt ".concat(a.toFixed(0)),"Limit ".concat(c.toFixed(0)),"Result ".concat(u.toFixed(0))),this.resultArray.push([u,!1]);var s=a<1?1:Math.min(u/a,1);return[t.x,t.y,this.getVectorPoint(t.x,e,s),this.getVectorPoint(t.y,r,s)]}},{key:"cast",value:function(t){this.backswingEnd=e.default.now+n.default.daggerBackswing,this.skillEnd=e.default.now+n.default.daggerCooldown,this.blinkFinished=!1,this.resultArray[this.resultArray.length-1][1]=!0,this.linkObject(t)}},{key:"updateModel",value:function(t){if(this.blinkFinished)this.unlinkObject();else{var r=this.backswingEnd-e.default.now,i=Math.max(r,0)/n.default.daggerBackswing;this.x=this.getVectorPoint(this.destX,this.srcX,i),this.y=this.getVectorPoint(this.destY,this.srcY,i),this.blinkFinished=r<0}}},{key:"updateView",value:function(){if(this.context2d.clearRect(0,0,this.canvasSpan,this.canvasSpan),!this.isReady()){var t=1-(this.skillEnd-e.default.now)/n.default.daggerCooldown;this.context2d.beginPath(),this.context2d.moveTo(this.canvasMidX,this.canvasMidY),this.context2d.arc(this.canvasMidX,this.canvasMidY,this.canvasSpan,Math.PI*(2*t-.5),p),this.context2d.fill()}}},{key:"getAnalyzeTextArray",value:function(){var t=this.resultArray.filter(function(t){return t[1]}).map(function(t){return t[0]}),e=t.length,n=t.reduce(function(t,e){return t+e},0);return["使用次數 ".concat(e),"平均距離 ".concat(0===e?"--":(n/e).toFixed(0))]}}]),a}();exports.default=g;
},{"./AbstractObject":"zFBB","./Stopwatch":"RYAF","./Config":"q7W2"}],"DOUl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./AbstractObject"),e=n(require("./Stopwatch")),r=n(require("./Config"));function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=s(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function s(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=b();return function(){var r,n=v(t);if(e){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=function(n){f(s,t.Castable);var i=y(s);function s(t){var e;return u(this,s),(e=i.call(this,!1)).aniElem=t,e.aniElem.setAttribute("stroke","coral"),e.aniElem.setAttribute("stroke-width",5),e.skillStart=0,e.skillMid=0,e.trialArray=[],e}return c(s,[{key:"getSrcDestPos",value:function(t,e,n){var i=e-t.x,o=n-t.y,s=Math.hypot(i,o),a=s-r.default.hookCastRange,u=Math.max(a,0)/s;return[this.getVectorPoint(t.x,e,u),this.getVectorPoint(t.y,n,u),e,n]}},{key:"cast",value:function(t){var n=r.default.hookCastRange,i=1e3*n/r.default.hookProjectileSpeed;this.skillMid=e.default.now+i,this.skillEnd=this.backswingEnd=this.skillMid+i,this.skillStart=e.default.now,this.x=this.srcX=t.x,this.y=this.srcY=t.y;var o=this.destX-this.srcX,s=this.destY-this.srcY,a=n/Math.hypot(o,s);this.destX=this.getVectorPoint(this.srcX,this.destX,a),this.destY=this.getVectorPoint(this.srcY,this.destY,a),this.trialArray.push(0)}},{key:"updateModel",value:function(){if(this.isReady())this.unlinkObject();else{var t=Math.abs(this.skillMid-e.default.now)/(this.skillEnd-this.skillMid);this.x=this.getVectorPoint(this.destX,this.srcX,t),this.y=this.getVectorPoint(this.destY,this.srcY,t)}}},{key:"updateView",value:function(){this.isReady()?this.aniElem.style.opacity=0:(this.aniElem.style.opacity=1,this.aniElem.setAttribute("x1",this.srcX.toFixed(0)),this.aniElem.setAttribute("y1",this.srcY.toFixed(0)),this.aniElem.setAttribute("x2",this.x.toFixed(0)),this.aniElem.setAttribute("y2",this.y.toFixed(0)))}},{key:"tryAttack",value:function(t){if(e.default.now>=this.skillMid)return null;var r,n=o(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(i.withinRange(this.x,this.y))return this.destX=i.x,this.destY=i.y,this.skillMid=e.default.now,this.skillEnd=this.backswingEnd=2*this.skillMid-this.skillStart,this.linkObject(i),this.trialArray[this.trialArray.length-1]=1,i}}catch(s){n.e(s)}finally{n.f()}return null}},{key:"getAnalyzeTextArray",value:function(){var t=this.trialArray.length,e=this.trialArray.reduce(function(t,e){return t+e},0),r=0===t?0:e/t;return["使用次數 ".concat(t),"命中率 ".concat((100*r).toFixed(0),"%")]}},{key:"streak",get:function(){return this.trialArray.length-this.trialArray.lastIndexOf(0)-1}}]),s}();exports.default=k;
},{"./AbstractObject":"zFBB","./Stopwatch":"RYAF","./Config":"q7W2"}],"CBGz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./AbstractObject"),e=r(require("./Config"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=y();return function(){var r,n=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(r){s(i,t.Movable);var n=c(i);function i(t){var r;return o(this,i),(r=n.call(this,e.default.pudgeCollisionSize)).aniElem=t,r.aniElem.setAttribute("fill","orchid"),r.aniElem.setAttribute("r",e.default.pudgeCollisionSize),r.x=r.destX=.5*e.default.x,r.y=r.destY=.5*e.default.y,r.castableArray=[],r}return u(i,[{key:"addCastable",value:function(){var t;(t=this.castableArray).push.apply(t,arguments)}},{key:"normalMove",value:function(t){var r=this;if(!this.castableArray.some(function(t){return t.isCasting()})){var n=this.destX-this.x,o=this.destY-this.y,i=Math.hypot(n,o),u=e.default.pudgeMovementSpeed*t;if(i<=u)this.x=this.destX,this.y=this.destY,this.castableArray.forEach(function(t){return t.tryCast(r)&&r.stopAction()});else{var s=u/i;this.x+=n*s,this.y+=o*s}this.clipPos("x"),this.clipPos("y")}}},{key:"registerMove",value:function(t,e){this.castableArray.some(function(t){return t.isCasting()})||(this.destX=t,this.destY=e,this.castableArray.forEach(function(t){return t.unregister()}))}},{key:"stopAction",value:function(){this.destX=this.x,this.destY=this.y,this.castableArray.forEach(function(t){return t.unregister()})}}]),i}();exports.default=h;
},{"./AbstractObject":"zFBB","./Config":"q7W2"}],"leBZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./AbstractObject"),e=r(require("./Stopwatch")),n=r(require("./Config"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=p();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(r){c(u,t.Movable);var o=l(u);function u(t){var e;return i(this,u),(e=o.call(this,n.default.meatCollisionSize)).aniElem=t,e.aniElem.setAttribute("fill","pink"),e.aniElem.setAttribute("r",n.default.meatCollisionSize),e.deltaX=0,e.deltaY=0,e.currentSpeed=0,e.trendSpan=0,e.trendEnd=0,e}return a(u,[{key:"unlinkedPostback",value:function(){this.randomizePosition(),this.randomizeMovement()}},{key:"randomizeMovement",value:function(){var t=2*Math.PI*Math.random();this.currentSpeed=n.default.meatSpeedMin+Math.random()*n.default.meatSpeedRange,this.deltaX=this.currentSpeed*Math.cos(t),this.deltaY=this.currentSpeed*Math.sin(t),this.trendSpan=(.5*Math.random()+.5)*n.default.meatTrendPeriod,this.trendEnd=e.default.now+this.trendSpan}},{key:"normalMove",value:function(t){e.default.now>=this.trendEnd&&this.randomizeMovement(),this.clipPos("x")&&(this.deltaX*=-1),this.clipPos("y")&&(this.deltaY*=-1),this.x+=this.deltaX*t,this.y+=this.deltaY*t}}]),u}();exports.default=y;
},{"./AbstractObject":"zFBB","./Stopwatch":"RYAF","./Config":"q7W2"}],"Jfq0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Stopwatch")),e=o(require("./Config")),n=o(require("./Dagger")),a=o(require("./Hook")),r=o(require("./Pudge")),i=o(require("./Meat"));function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return c(t)||u(t)||y(t)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function c(t){if(Array.isArray(t))return g(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function m(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}function f(t,e){return v(t)||b(t,e)||y(t,e)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function b(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);a=!0);}catch(l){r=!0,i=l}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}}function v(t){if(Array.isArray(t))return t}var E="http://www.w3.org/2000/svg",x=Object.freeze({Move:"auto",Hook:"crosshair",Dagger:"cell"});function k(t,e){for(var n=0,a=Object.entries(e);n<a.length;n++){var r=f(a[n],2),i=r[0],o=r[1];t.setAttribute(i,o)}}var S=function(){function o(t){d(this,o),this.dagger=null,this.hook=null,this.pudge=null,this.meatArray=null,this.objectArray=null,this.castableInputMap=new Map,this.inputMode=x.Move,this.cursorSetter=t,this.dashboardContainer=null,this.dashboardElements=null,this.indicatorContainer=null,this.indicatorElements=null,this.battleField=null,this.timerValue=0,this.timerElement=null}return m(o,[{key:"setBoundary",value:function(t,n){e.default.setBoundary(t,n),this.dashboardElements.boundary.textContent="".concat(t,"*").concat(n)}},{key:"getScreenLayerElements",value:function(){return[this.dashboardElements.dagger,this.dashboardContainer,this.indicatorContainer,this.timerElement]}},{key:"buildDashboard",value:function(){var t=document.createElement("canvas");k(t,{width:"60",height:"60",class:"dashboardDagger"});var e=document.createElementNS(E,"circle");k(e,{cx:"95",cy:"30",r:"28",fill:"transparent",stroke:"orange","stroke-width":"4",pathLength:"1000","stroke-dashoffset":"250","stroke-dasharray":"0"});var n=document.createElementNS(E,"text");k(n,{x:"95",y:"30","dominant-baseline":"central","text-anchor":"middle",textLength:"40",lengthAdjust:"spacing",class:"dashboardLevel"});var a=document.createElementNS(E,"text");k(a,{x:"135",y:"30","dominant-baseline":"central","text-anchor":"start",class:"dashboardScore"});var r=document.createElementNS(E,"text");k(r,{x:"100%",y:"0","dominant-baseline":"hanging","text-anchor":"end",class:"dashboardBoundary"}),this.dashboardContainer=document.createElementNS(E,"svg"),k(this.dashboardContainer,{width:"100%",height:"60",class:"dashboard"}),this.dashboardContainer.append(e,n,a,r),this.dashboardElements={dagger:t,experience:e,level:n,score:a,boundary:r},n.textContent="Lv0",a.textContent=0}},{key:"buildIndicator",value:function(){var t=document.createElement("span");t.style.color="tomato";var e=document.createElement("span");e.style.color="springgreen",this.indicatorContainer=document.createElement("div"),this.indicatorContainer.className="indicator",this.indicatorContainer.append(t,e),this.indicatorElements={score:t,combo:e}}},{key:"initialize",value:function(t,o,l){var u;this.buildDashboard(),this.buildIndicator(),this.timerElement=document.createElement("div"),this.timerElement.className="timer",this.timerValue=t,this.setBoundary(o,l),this.dagger=new n.default(this.dashboardElements.dagger),this.hook=new a.default(document.createElementNS(E,"line")),this.pudge=new r.default(document.createElementNS(E,"circle")),this.pudge.addCastable(this.dagger,this.hook),this.meatArray=[];for(var c=e.default.meatAmount;c>0;--c){var d=new i.default(document.createElementNS(E,"circle"));d.randomizePosition(),this.meatArray.push(d)}this.battleField=document.createElementNS(E,"svg"),this.battleField.setAttribute("class","battleField"),(u=this.battleField).append.apply(u,[this.hook.aniElem,this.pudge.aniElem].concat(s(this.meatArray.map(function(t){return t.aniElem})))),this.objectArray=Array.of.apply(Array,[this.dagger,this.hook,this.pudge].concat(s(this.meatArray))),this.castableInputMap.set(x.Dagger,this.dagger),this.castableInputMap.set(x.Hook,this.hook)}},{key:"emitIndicator",value:function(t,n,a,r){this.indicatorElements.score.textContent="+".concat(a),this.indicatorElements.combo.textContent="#".concat(r),Object.assign(this.indicatorContainer.style,{left:"".concat(t.toFixed(0),"px"),top:"".concat(n.toFixed(0),"px"),animationName:"none"});var i=this.indicatorContainer.getBoundingClientRect(),o=Math.min(e.default.x-i.right,0)-Math.min(i.left,0),s=Math.min(e.default.y-i.bottom,0)-Math.min(i.top,0);Object.assign(this.indicatorContainer.style,{left:"".concat((t+o).toFixed(0),"px"),top:"".concat((n+s).toFixed(0),"px"),animationName:"indicatorAnimation"})}},{key:"updateModels",value:function(){if(!t.default.isRunning())return!1;var n=this.hook.tryAttack(this.meatArray);if(null!=n){var a=Math.hypot(n.x-this.pudge.x,n.y-this.pudge.y),r=this.hook.streak,i=e.default.gainScore(a,n.currentSpeed,r);this.emitIndicator(n.x,n.y,i,r);var o=Math.round(1e3*e.default.expValue),s="".concat(o," ").concat(1e3-o);this.dashboardElements.experience.setAttribute("stroke-dasharray",s),this.dashboardElements.level.textContent=e.default.displayLevelText,this.dashboardElements.score.textContent=e.default.currentScore.toString()}var l=t.default.now,u=.001*(t.default.update()-l);return this.objectArray.forEach(function(t){return t.updateModel(u)}),(this.timerValue-=u)<0}},{key:"updateViews",value:function(){t.default.isRunning()&&(this.timerElement.textContent=this.timerValue.toFixed(0),this.objectArray.forEach(function(t){return t.updateView()}))}},{key:"playerMove",value:function(e,n){t.default.isRunning()&&(this.pudge.registerMove(e,n),this.cursorSetter(x.Move))}},{key:"keyEventHandler",value:function(e){var n=t.default.isRunning();if("Escape"!==e){if(n){var a=null;if(" "===e)a=x.Dagger;else{if("t"!==e)return void console.log("UnusedKey",e);a=x.Hook}this.castableInputMap.get(a).isReady()?this.cursorSetter(this.inputMode=a):this.cursorSetter(x.Move)}}else t.default.setState(!n)}},{key:"launchInput",value:function(e,n){if(t.default.isRunning()){switch(this.inputMode){case x.Hook:this.hook.register(this.pudge,e,n);break;case x.Dagger:this.dagger.register(this.pudge,e,n)}this.cursorSetter(this.inputMode=x.Move)}}}]),o}();exports.default=S;
},{"./Stopwatch":"RYAF","./Config":"q7W2","./Dagger":"YTsE","./Hook":"DOUl","./Pudge":"CBGz","./Meat":"leBZ"}],"mpVp":[function(require,module,exports) {
"use strict";var e=r(require("./Stopwatch")),t=r(require("./Config")),n=r(require("./Controller"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return c(e)||a(e,t)||d(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}function c(e){if(Array.isArray(e))return e}function u(e){return f(e)||s(e)||d(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function s(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return y(e)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=new n.default(function(e){return document.body.style.cursor=e});window.addEventListener("resize",function(e){m.setBoundary(window.innerWidth,window.innerHeight)}),window.addEventListener("contextmenu",function(e){e.preventDefault(),e.stopPropagation()});var w=function(e){switch(e.button){case 2:m.playerMove(e.clientX,e.clientY);break;case 0:m.launchInput(e.clientX,e.clientY);break;default:console.log(e.button,e.clientX,e.clientY)}},p=function(e){"Tab"===e.key?e.preventDefault():m.keyEventHandler(e.key)};document.querySelector("#button").addEventListener("click",function(){var n;console.log("Game Start !"),t.default.reset();var r=parseInt(new URL(document.location.href).searchParams.get("t")),o=Number.isSafeInteger(r)?Math.min(60,Math.max(1,r)):60;m.initialize(o,window.innerWidth,window.innerHeight),(n=document.querySelector("#screenLayer")).replaceChildren.apply(n,u(m.getScreenLayerElements())),document.querySelector("#battleFieldLayer").replaceChildren(m.battleField),e.default.setState(!0),window.addEventListener("keydown",p),window.addEventListener("mousedown",w),document.querySelector("#information").style.display="none"});var v=function(){console.log("Game Over !"),e.default.setState(!1),window.removeEventListener("keydown",p),window.removeEventListener("mousedown",w);for(var n=o(t.default.updateAndGetRecord(),2),r=n[0],i=n[1],a=r-i,c=0,u=[["message",["~ 遊戲結束 ~"]],["discriptionMeat",["本次分數 ".concat(i)]],["discriptionRight",["歷史最高 ".concat(r)]],["discriptionLeft",["差距 ".concat(a)]],["discriptionHook",m.hook.getAnalyzeTextArray()],["discriptionDagger",m.dagger.getAnalyzeTextArray()]];c<u.length;c++){var l=o(u[c],2),d=l[0],s=l[1];document.querySelector("#".concat(d)).innerHTML=s.join("<br />")}document.querySelector("#information").style.display="grid"};window.setInterval(function(){m.updateModels()&&v()},t.default.modelUpdatePeriod),function e(){m.updateViews(),window.requestAnimationFrame(e)}();
},{"./Stopwatch":"RYAF","./Config":"q7W2","./Controller":"Jfq0"}]},{},["mpVp"], null)